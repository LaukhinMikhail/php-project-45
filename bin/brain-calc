#!/usr/bin/env php


<?php

// Путь который будет использован при глобальной установке пакета
$autoloadPath1 = __DIR__ . '/../../../autoload.php';

// Путь для локальной работы с проектом
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';

if (file_exists($autoloadPath1)) {
    require_once $autoloadPath1;
} else {
    require_once $autoloadPath2;
}

$name = BrainGames\Engine\greeting();

print_r ("Welcome to the Brain Games!
What is the result of the expression?.
\n");

$trueCount = 0;
$movesNum = 3;
$operands = ['+', '-', '*'];


while ($trueCount < $movesNum) {
    $randomNumber1 = rand(1, 99);
    $randomNumber2 = rand(1, 99);
    $numOperand = rand(0, 2);
    switch ($numOperand) {
        case 0:
            $currentResponse = $randomNumber1 + $randomNumber2;
            break;
        case 1:
            $currentResponse = $randomNumber1 - $randomNumber2;
            break;
        case 2:
            $currentResponse = $randomNumber1 * $randomNumber2;
            break;
    }
    
    //print_r ($currentResponse);
    print_r ("Question: " . $randomNumber1 . $operands[$numOperand] . $randomNumber2 . ". Your answer: " . "\n");
    

    $response = trim(fgets(STDIN));
    if ($response != $currentResponse) {
        print_r("\"{$response}\" is wrong answer ;(. Correct answer was \"{$currentResponse}\".\nLet's try again, {$name}!\n");
        break;
    }

    $trueCount++;
    
    if ($trueCount === $movesNum) {
        print_r ("Congratulations, " . $name . "!\n");
    }
}
